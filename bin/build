#!/bin/sh -e
# Centi build script.

# Start from CENTI_HOME
cd "$(dirname $(realpath "$0"))/.."

# Add $PWD to asdf load path
export CL_SOURCE_REGISTRY="$PWD"

# Build
sbcl --noinform <<- EOF
	(require :asdf)
	(asdf:disable-output-translations)
	(asdf:load-system :centi)
	(asdf:make :centi)
EOF

# Remove .fasl files
find -name '*.fasl' | xargs rm
